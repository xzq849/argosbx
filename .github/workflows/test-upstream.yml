# æµ‹è¯•ä¸Šæ¸¸ä»“åº“è¿æ¥
name: Test Upstream Connection

# æ‰‹åŠ¨è§¦å‘æµ‹è¯•
on:
  workflow_dispatch:

jobs:
  test-connection:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    
    steps:
      - name: ğŸ” æµ‹è¯•ä¸Šæ¸¸ä»“åº“è¿æ¥
        run: |
          echo "ğŸ” æµ‹è¯•å¤šç§æ–¹æ³•æ£€æŸ¥ä¸Šæ¸¸ä»“åº“..."
          
          echo "æ–¹æ³•1: ä½¿ç”¨curlæ£€æŸ¥GitHubé¡µé¢"
          if curl -s -f -I "https://github.com/yonggekkk/argosbx" >/dev/null 2>&1; then
            echo "âœ… curlæ£€æŸ¥æˆåŠŸ"
          else
            echo "âŒ curlæ£€æŸ¥å¤±è´¥"
          fi
          
          echo ""
          echo "æ–¹æ³•2: ä½¿ç”¨git ls-remoteæ£€æŸ¥ä»“åº“"
          if git ls-remote --heads https://github.com/yonggekkk/argosbx.git >/dev/null 2>&1; then
            echo "âœ… git ls-remoteæ£€æŸ¥æˆåŠŸ"
          else
            echo "âŒ git ls-remoteæ£€æŸ¥å¤±è´¥"
          fi
          
          echo ""
          echo "æ–¹æ³•3: å°è¯•cloneä»“åº“ï¼ˆæµ…å…‹éš†ï¼‰"
          if git clone --depth=1 https://github.com/yonggekkk/argosbx.git test-repo >/dev/null 2>&1; then
            echo "âœ… æµ…å…‹éš†æˆåŠŸ"
            rm -rf test-repo
          else
            echo "âŒ æµ…å…‹éš†å¤±è´¥"
          fi
          
          echo ""
          echo "æ–¹æ³•4: æ£€æŸ¥ä»“åº“æ˜¯å¦å­˜åœ¨ï¼ˆä½¿ç”¨GitHub APIï¼‰"
          if curl -s "https://api.github.com/repos/yonggekkk/argosbx" | grep -q '"name"'; then
            echo "âœ… GitHub APIæ£€æŸ¥æˆåŠŸ"
          else
            echo "âŒ GitHub APIæ£€æŸ¥å¤±è´¥"
          fi
          
          echo ""
          echo "ğŸ”§ ç½‘ç»œè¯Šæ–­ä¿¡æ¯ï¼š"
          echo "DNSè§£ææµ‹è¯•ï¼š"
          nslookup github.com || echo "DNSè§£æå¤±è´¥"
          
          echo ""
          echo "è¿æ¥æµ‹è¯•ï¼š"
          ping -c 3 github.com || echo "pingå¤±è´¥"